<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Search-Roca Kiosk</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; }
        .result-box { border: 2px solid #ddd; padding: 20px; border-radius: 10px; display: inline-block; }
        #qrcode { margin-top: 20px; display: flex; justify-content: center; }
        h1 { color: #d63031; } /* ë‹¤ì´ì†Œ ë¹¨ê°„ìƒ‰ */
    </style>
</head>
<body>

    <div class="result-box">
        <h1 id="product-name">ìƒí’ˆëª… ë¡œë”©ì¤‘...</h1>
        <p id="tts-text">ì•ˆë‚´ ë©˜íŠ¸ ë¡œë”©ì¤‘...</p>
        <hr>
        <h3>ğŸ‘‡ ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ ìŠ¤ìº”í•˜ì—¬ ê¸¸ì•ˆë‚´ ë°›ê¸°</h3>
        <div id="qrcode"></div>
    </div>

    <script>
        // [Step 1 ê²°ê³¼ë¬¼] ê°€ìƒ ë°ì´í„° (LLMì´ ì¤¬ë‹¤ê³  ê°€ì •)
        const mockData = {
            "product_name": "ìŠ¤í… ê±´ì§€ê¸° (ì±„ë°˜)",
            "location_info": { "zone": "Kitchen_A", "x": 150, "y": 400 }, // ëª©í‘œ ì¢Œí‘œ
            "tts_text": "2ì¸µ ì£¼ë°©ì½”ë„ˆ Aêµ¬ì—­ì— ìˆìŠµë‹ˆë‹¤. QRì„ ì°ì–´ë³´ì„¸ìš”."
        };

        // 1. í™”ë©´ì— ì •ë³´ ë¿Œë¦¬ê¸°
        document.getElementById("product-name").innerText = mockData.product_name;
        document.getElementById("tts-text").innerText = mockData.tts_text;

        // 2. ëª¨ë°”ì¼ë¡œ ë„˜ê¸¸ URL ìƒì„± (í•µì‹¬!)
        // â˜…ì¤‘ìš”â˜…: ë‚˜ì¤‘ì— ì‹¤ì œ í˜¸ìŠ¤íŒ… ì£¼ì†Œë¡œ ë°”ê¿”ì•¼ í•¨ (ì§€ê¸ˆì€ ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš©)
        const mobileBaseUrl = window.location.href.replace("kiosk.html", "mobile.html");
        
        // íŒŒë¼ë¯¸í„° ì¸ì½”ë”©: ?tx=150&ty=400&name=ì±„ë°˜
        const finalUrl = `${mobileBaseUrl}?tx=${mockData.location_info.x}&ty=${mockData.location_info.y}&name=${encodeURIComponent(mockData.product_name)}`;

        console.log("Generated URL:", finalUrl);

        // 3. QR ì½”ë“œ ìƒì„±
        new QRCode(document.getElementById("qrcode"), {
            text: finalUrl,
            width: 200,
            height: 200
        });
    </script>
</body>
</html>
